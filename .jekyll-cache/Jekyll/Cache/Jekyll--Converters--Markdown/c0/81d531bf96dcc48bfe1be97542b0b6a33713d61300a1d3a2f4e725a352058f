I"1
<p>Let’s say you’ve set up two listeners, one internal and one external as follows</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>KAFKA_LISTENERS=INTERNAL://0.0.0.0:9092,EXTERNAL://0.0.0.0:19092
</code></pre></div></div>

<p>To test these, you can use kafkacat<br />
First, let’s test the external listener from our local machine<br />
Step one is to get the metadata</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>kafkacat -b <span class="nt">&lt;extrnal</span> <span class="na">IP</span><span class="nt">&gt;</span>:<span class="nt">&lt;external</span> <span class="na">port</span><span class="nt">&gt;</span> -L
</code></pre></div></div>
<p>For example:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>kafkacat -b kafka.stack1.net:2000 -L
</code></pre></div></div>
<p>As you can see in this exmaple I’ve mapped the external listener to an IP and port. In my case I’m running kafka inside a Kubernetes cluster and I explain how to set up the networking in [THIS ARTICLE - TBC]</p>

<p>This will potentially send back alot of info if you already have topics defined so you may want to filter as follows:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>kafkacat -b kafka.stack1.net:2000 -L | grep -v partition 
</code></pre></div></div>
<p>The response should look something like this</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>Metadata for all topics (from broker 0: kafka.stack1.net:2000/0):
 3 brokers:
  broker 0 at kafka.stack1.net:2000
  broker 2 at kafka.stack1.net:2002
  broker 1 at kafka.stack1.net:2001 (controller)
</code></pre></div></div>

<p>So, the above is testing just half of the picture. I.e it’s testing whether we can hit a broker and retrieve metadata about the all the brokers in the cluster.</p>

<p>Next we need to check if we can publish and consume stuff</p>

<p>To do this, open two terminal windows, one will be for publishing, the other will be for consuming.</p>

<p>In window 1 type: <code class="language-html highlighter-rouge">kafkacat -b kafka.stack1.net:2000 -P -t MY_TEST_TOPIC</code> then press return</p>

<p>In window 1 type: <code class="language-html highlighter-rouge">kafkacat -b kafka.stack1.net:2000 -C -t MY_TEST_TOPIC</code> then press return</p>

<p>Now go back to window 1 and type a message, Hello World is always a good one :)</p>

<p>You should see the message appear in window 2</p>

:ET