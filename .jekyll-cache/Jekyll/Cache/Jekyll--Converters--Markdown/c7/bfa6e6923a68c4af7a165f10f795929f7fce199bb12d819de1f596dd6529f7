I"b<p>Consider the following stateful set:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> kubectl get pods | <span class="nb">grep </span>kafka
workflow01-dev-cp-cp-kafka-0                           2/2     Running            3          6h38m
workflow01-dev-cp-cp-kafka-1                           2/2     Running            2          6h37m
workflow01-dev-cp-cp-kafka-2                           2/2     Running            0          6h36m</code></pre></figure>

<p>Which has the following associated headless service:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> kubectl get svc | <span class="nb">grep </span>headless
workflow01-dev-cp-cp-kafka-headless       ClusterIP   None           &lt;none&gt;        9092/TCP            6h49m</code></pre></figure>

<p>From within a pod on the cluster, the DNS looks like this:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> dig workflow01-dev-cp-cp-kafka-headless.workflow01-dev.svc.cluster.local +short
10.1.1.49
10.1.2.122
10.1.0.124</code></pre></figure>

<p>This is returning the IPâ€™s of all three stateful set pods (this can be verified as below)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> kubectl get pods <span class="nt">-o</span> wide  | <span class="nb">grep </span>kafka
workflow01-dev-cp-cp-kafka-0      2/2     Running    3  6h53m   10.1.2.122   aks-default-27860648-vmss000002
workflow01-dev-cp-cp-kafka-1      2/2     Running    2  6h51m   10.1.1.49    aks-default-27860648-vmss000001
workflow01-dev-cp-cp-kafka-2      2/2     Running    0  6h50m   10.1.0.124   aks-default-27860648-vmss000000</code></pre></figure>

<p>If I want to get the address of a single member of the stateful set:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> dig workflow01-dev-cp-cp-kafka-0.workflow01-dev-cp-cp-kafka-headless.workflow01-dev.svc.cluster.local
10.1.2.122</code></pre></figure>

:ET